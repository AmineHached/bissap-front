<div class="container mt-4">
  <mat-card>
    <mat-card-header> Create user [Reactive Forms Module] </mat-card-header>
    <mat-card-content>
      <form class="mt-2" [formGroup]="formGroup" (ngSubmit)="ts_saveUser()">
        <mat-form-field class="mx-1" appearance="fill">
          <mat-label>Name</mat-label>
          <input matInput formControlName="name" required />
        </mat-form-field>
        <br>

        <mat-form-field class="mx-2" appearance="fill">
          <mat-label>Email</mat-label>
          <input matInput formControlName="email" type="email" required />
        </mat-form-field>
        <br>

        <mat-form-field  class="mx-2" appearance="fill">
          <mat-label>Age</mat-label>
          <input matInput  formControlName="age" type="text" required />
        </mat-form-field>
        <br>
        
        <label>Select Department</label>
        <select  class="form-control w-25" id="department" name="department" formControlName="department">
          @for (dept of departments; track $index) {
            <option [ngValue]="dept">
              {{dept.name}}
            </option>
          }
        </select>
        <div class="mt-2"></div>

        <button type="submit" mat-raised-button color="primary">Save</button>
        <button class="mx-1" (click)="clearContent()" mat-raised-button >Clear</button>
        <button mat-raised-button color="warn">Warn</button>
      </form>
      <div [hidden]="!storedData">{{storedData | json}}</div>

      <div class="d-flex mt-2">

        @if (formGroup.get('name')?.touched && formGroup.get('name')?.hasError('required')) {
          <div class="alert alert-danger w-25 mx-1">
            <span>Name is required</span>
          </div>
        }

        @if (formGroup.get('email')?.touched && formGroup.get('email')?.hasError('required')) {
          <div class="alert alert-danger w-25 mx-1">
            <span>Email is required</span>
          </div>
        }

        @if (formGroup.get('age')?.touched && formGroup.get('age')?.hasError('required')) {
          <div class="alert alert-danger w-25 mx-1">
            <span>Age is required</span>
          </div>
        }
      </div>
    </mat-card-content>
  </mat-card>
</div>



